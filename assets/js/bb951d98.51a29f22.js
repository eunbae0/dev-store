"use strict";(self.webpackChunkdev_store=self.webpackChunkdev_store||[]).push([[1076],{5088:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>m,frontMatter:()=>s,metadata:()=>l,toc:()=>i});var o=n(6560),r=n(8432);const s={},a="@Gorhom/bottom-sheet\ub97c useContext Provider, Portal\uc744 \uc774\uc6a9\ud558\uc5ec \uc801\uc6a9",l={id:"react_native/common/bottom_sheet",title:"@Gorhom/bottom-sheet\ub97c useContext Provider, Portal\uc744 \uc774\uc6a9\ud558\uc5ec \uc801\uc6a9",description:"\uc804\uc5ed\uc801\uc73c\ub85c bottomSheet\ub97c \ud638\ucd9c\ud558\uc5ec \uc0ac\uc6a9\ud560 \uc218 \uc788\ub3c4\ub85d \uad6c\ud604",source:"@site/docs/react_native/common/bottom_sheet.md",sourceDirName:"react_native/common",slug:"/react_native/common/bottom_sheet",permalink:"/dev-store/docs/react_native/common/bottom_sheet",draft:!1,unlisted:!1,editUrl:"https://github.com/eunbae0/dev-store/tree/main/docs/react_native/common/bottom_sheet.md",tags:[],version:"current",frontMatter:{},sidebar:"rnSidebar",previous:{title:"Zustand\uc5d0\uc11c async storage \uc0ac\uc6a9",permalink:"/dev-store/docs/react_native/common/async_storage_with_zustand"},next:{title:"\ucef4\ud3ec\ub10c\ud2b8 \ub192\uc774\ub97c 100%\ub85c \uc0ac\uc6a9\ud560 \ub54c",permalink:"/dev-store/docs/react_native/common/component_height_100_percent"}},c={},i=[{value:"\uad6c\ud604 \ud658\uacbd",id:"\uad6c\ud604-\ud658\uacbd",level:2},{value:"\ucf54\ub4dc",id:"\ucf54\ub4dc",level:2},{value:"\uc0ac\uc6a9 \uc608\uc2dc",id:"\uc0ac\uc6a9-\uc608\uc2dc",level:2}];function h(t){const e={code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.M)(),...t.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h1,{id:"gorhombottom-sheet\ub97c-usecontext-provider-portal\uc744-\uc774\uc6a9\ud558\uc5ec-\uc801\uc6a9",children:"@Gorhom/bottom-sheet\ub97c useContext Provider, Portal\uc744 \uc774\uc6a9\ud558\uc5ec \uc801\uc6a9"}),"\n",(0,o.jsx)(e.p,{children:"\uc804\uc5ed\uc801\uc73c\ub85c bottomSheet\ub97c \ud638\ucd9c\ud558\uc5ec \uc0ac\uc6a9\ud560 \uc218 \uc788\ub3c4\ub85d \uad6c\ud604"}),"\n",(0,o.jsx)(e.h2,{id:"\uad6c\ud604-\ud658\uacbd",children:"\uad6c\ud604 \ud658\uacbd"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"react-native-expo"}),"\n",(0,o.jsx)(e.li,{children:"@gorhom/bottom-sheet^5"}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"\ucf54\ub4dc",children:"\ucf54\ub4dc"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-tsx",children:"import { Platform } from 'react-native';\nimport { FocusScope } from '@react-native-aria/focus';\nimport {\n\tcreateContext,\n\tuseRef,\n\tuseState,\n\tuseCallback,\n\tuseContext,\n\ttype PropsWithChildren,\n\tuseMemo,\n} from 'react';\nimport BottomSheet, {\n\tBottomSheetBackdrop,\n\tBottomSheetView,\n} from '@gorhom/bottom-sheet';\nimport { Portal, PortalProvider, PortalHost } from '@gorhom/portal';\n\ntype IBottomSheet = React.ComponentProps<typeof BottomSheet>;\ntype BottomSheetContextType = {\n\tvisible: boolean;\n\tbottomSheetRef: React.RefObject<BottomSheet>;\n\thandleClose: () => void;\n\thandleOpen: () => void;\n\tBottomSheetContainer: React.FC<IBottomSheet>;\n};\n\nconst DEFAULT_CONTEXT: BottomSheetContextType = {\n\tvisible: false,\n\tbottomSheetRef: { current: null },\n\thandleClose: () => {},\n\thandleOpen: () => {},\n\tBottomSheetContainer: () => null,\n};\n\nconst ANIMATION_DELAY = 100;\n\nconst BottomSheetContext =\n\tcreateContext<BottomSheetContextType>(DEFAULT_CONTEXT);\n\nconst BottomSheetBackdropComponent = (\n\tprops: React.ComponentProps<typeof BottomSheetBackdrop>,\n) => (\n\t<BottomSheetBackdrop {...props} disappearsOnIndex={-1} appearsOnIndex={0} />\n);\n\nconst WebContent = ({\n\tvisible,\n\tcontent,\n}: {\n\tvisible: boolean;\n\tcontent: React.ReactNode;\n}) => (\n\t<FocusScope contain={visible} autoFocus={true} restoreFocus={true}>\n\t\t{content}\n\t</FocusScope>\n);\n\nexport const BottomSheetProvider = ({ children }: PropsWithChildren) => {\n\tconst [visible, setVisible] = useState(false);\n\tconst bottomSheetRef = useRef<BottomSheet>(null);\n\n\tconst handleOpen = useCallback(() => {\n\t\tsetTimeout(() => {\n\t\t\tbottomSheetRef.current?.expand();\n\t\t}, ANIMATION_DELAY);\n\t\tsetVisible(true);\n\t}, []);\n\n\tconst handleClose = useCallback(() => {\n\t\tbottomSheetRef.current?.close();\n\t\tsetVisible(false);\n\t}, []);\n\n\tconst handleSheetChanges = useCallback(\n\t\t(index: number) => {\n\t\t\tif (index === -1) handleClose();\n\t\t},\n\t\t[handleClose],\n\t);\n\n\tconst keyDownHandlers = useMemo(\n\t\t() =>\n\t\t\tPlatform.OS === 'web'\n\t\t\t\t? {\n\t\t\t\t\t\tonKeyDown: (e: React.KeyboardEvent) => {\n\t\t\t\t\t\t\tif (e.key === 'Escape') {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\thandleClose();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t: {},\n\t\t[handleClose],\n\t);\n\n\tconst BottomSheetContainer = useCallback(\n\t\t({ children, ...props }: IBottomSheet) => (\n\t\t\t<Portal hostName=\"BottomSheet\">\n\t\t\t\t<BottomSheet\n\t\t\t\t\tref={bottomSheetRef}\n\t\t\t\t\tindex={-1}\n\t\t\t\t\tbackdropComponent={BottomSheetBackdropComponent}\n\t\t\t\t\tonChange={handleSheetChanges}\n\t\t\t\t\toverDragResistanceFactor={0}\n\t\t\t\t\tenablePanDownToClose={true}\n\t\t\t\t\thandleIndicatorStyle={{ backgroundColor: 'lightgray', width: 36 }}\n\t\t\t\t\t{...props}\n\t\t\t\t>\n\t\t\t\t\t<BottomSheetView {...keyDownHandlers}>\n\t\t\t\t\t\t{Platform.OS === 'web'\n\t\t\t\t\t\t\t? visible && <WebContent visible={visible} content={children} />\n\t\t\t\t\t\t\t: children}\n\t\t\t\t\t</BottomSheetView>\n\t\t\t\t</BottomSheet>\n\t\t\t</Portal>\n\t\t),\n\t\t[visible, keyDownHandlers, handleSheetChanges],\n\t);\n\n\tconst contextValue = useMemo(\n\t\t() => ({\n\t\t\tvisible,\n\t\t\tbottomSheetRef,\n\t\t\thandleClose,\n\t\t\thandleOpen,\n\t\t\tBottomSheetContainer,\n\t\t}),\n\t\t[visible, handleClose, handleOpen, BottomSheetContainer],\n\t);\n\n\treturn (\n\t\t<PortalProvider>\n\t\t\t<BottomSheetContext.Provider value={contextValue}>\n\t\t\t\t{children}\n\t\t\t\t<PortalHost name=\"BottomSheet\" />\n\t\t\t</BottomSheetContext.Provider>\n\t\t</PortalProvider>\n\t);\n};\n\nexport const useBottomSheet = () => useContext(BottomSheetContext);\n"})}),"\n",(0,o.jsx)(e.h2,{id:"\uc0ac\uc6a9-\uc608\uc2dc",children:"\uc0ac\uc6a9 \uc608\uc2dc"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-tsx",children:"function Component() {\n  const { handleOpen, handleClose, BottomSheetContainer } = useBottomSheet();\n\n  return (\n    <HStack>\n      <HStack>\n        <Button onPress={() => handleOpen()} />\n       {/* Layout... */}\n      </HStack>\n      <BottomSheetContainer\n      // You Can Use BottomSheet Props\n      >\n        <Button onPress={handleClose()} />\n      </BottomSheetContainer>\n    </HStack>\n  )\n}\n"})})]})}function m(t={}){const{wrapper:e}={...(0,r.M)(),...t.components};return e?(0,o.jsx)(e,{...t,children:(0,o.jsx)(h,{...t})}):h(t)}},8432:(t,e,n)=>{n.d(e,{I:()=>l,M:()=>a});var o=n(4424);const r={},s=o.createContext(r);function a(t){const e=o.useContext(s);return o.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function l(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(r):t.components||r:a(t.components),o.createElement(s.Provider,{value:e},t.children)}}}]);